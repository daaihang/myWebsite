<!doctype html><html lang=zh dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>使用小米路由器 4C 登录西邮联通校园网 | Daaihang's Blog</title>
<meta name=keywords content><meta name=description content="使用广东工业大学的OpenWrt刷机包。亲测可以直接在西安邮电大学长安校区使用（联通校园网），并解除联通校园网的设备使用数量限制。适合有多台设备的同学使用。"><meta name=author content><link rel=canonical href=http://localhost:1313/docs/mi4c-drcom/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/favicon.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=http://localhost:1313/docs/mi4c-drcom/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/docs/mi4c-drcom/"><meta property="og:site_name" content="Daaihang's Blog"><meta property="og:title" content="使用小米路由器 4C 登录西邮联通校园网"><meta property="og:description" content="使用广东工业大学的OpenWrt刷机包。亲测可以直接在西安邮电大学长安校区使用（联通校园网），并解除联通校园网的设备使用数量限制。适合有多台设备的同学使用。"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2024-03-11T23:16:39+08:00"><meta property="article:modified_time" content="2024-03-11T23:16:39+08:00"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="使用小米路由器 4C 登录西邮联通校园网"><meta name=twitter:description content="使用广东工业大学的OpenWrt刷机包。亲测可以直接在西安邮电大学长安校区使用（联通校园网），并解除联通校园网的设备使用数量限制。适合有多台设备的同学使用。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"开发","item":"http://localhost:1313/docs/"},{"@type":"ListItem","position":2,"name":"使用小米路由器 4C 登录西邮联通校园网","item":"http://localhost:1313/docs/mi4c-drcom/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"使用小米路由器 4C 登录西邮联通校园网","name":"使用小米路由器 4C 登录西邮联通校园网","description":"使用广东工业大学的OpenWrt刷机包。亲测可以直接在西安邮电大学长安校区使用（联通校园网），并解除联通校园网的设备使用数量限制。适合有多台设备的同学使用。\n","keywords":[],"articleBody":"使用广东工业大学的OpenWrt刷机包。亲测可以直接在西安邮电大学长安校区使用（联通校园网），并解除联通校园网的设备使用数量限制。适合有多台设备的同学使用。\n参考文章：\n⭐在Dr.COM下使用路由器上校园网WIFI（若配置别的路由器则可以看这个Github项目）\n开启telnet刷小米路由器\n本教程仅供学习，请在成功刷入OpenWrt后正确使用系统，并在学习后24小时内删除相关固件和（或）软件包。\n步骤提要 初始化，简单进入系统。\n开启telnet和ftp，刷Breed，防止变砖。\n刷OpenWrt，配置网络和Dr.com。\n文件下载 MobaXterm 官网（MobaXterm Xserver），建议下载便携版本（Portable edition）。 R3GV2 patches Onedrive链接。 Breed（小米4C）下载链接，其他路由器查看这里的表格。 OpenWrt（小米4C）Github下载链接（内置了Dr.com插件及防检测插件）。 （可选）自行安装OpenWrt其他软件包。 前置步骤：进入系统配置密码 在校内无网情况下，路由器需要先配置WIFI密码才能进行后续步骤。否则无法用命令行登录小米路由器。\n路由器插入电源，手机或电脑搜索WIFI，找到名为Xiaomi_****的无密码WIFI，直接连接。\n打开路由器默认配置界面（IP地址：192.168.31.1），跳过拨号配置界面，直接设置WIFI密码（管理员密码默认于此相同，刷入Breed后该密码会被覆盖）。随后进入路由器主页，即可关闭网页。\n在小米路由器4C上开启telnet和FTP 解压R3GV2 patches包，双击运行0.start_main.bat批处理文件，期间需要在cmd窗口输入你的路由器4C的管理员密码。结束后，路由器4C就可以用telnet远程登录和使用FTP上传下载文件了。\n原理大概是运用程序漏洞提权，获取root权限并开启FTP服务。\n用telnet登录到小米路由器4C 在MobaXterm里新建一个session，类型telnet，主机地址为192.168.31.1，用户为root，密码空，就能登录路由器4C了。\n看到命令提示符是root@XiaoQiang即可完成登录。这其实就是Linux下的Shell。\n生成eeprom备份文件 在MobaXterm的telnet终端窗口键入以下命令并回车。\ndd if=/dev/mtd3 of=/tmp/eeprom.bin 理论上讲，用dd命令可以备份路由器4C的所有分区。最好把所有分区都备份。\n使用FTP上传Breed，并下载eeprom备份文件 在Windows上打开资源管理器，在地址栏输入ftp://192.168.31.1然后回车，路由器4C的文件系统就出现了。\nFTP服务使用的是游客匿名登录，无需账户和密码，可以直接回车登录。不要使用root账户登录。\n把之前下载的breed-mt7688-reset38.bin改名为breed.bin，然后复制到/tmp目录内备用。\n另外把/tmp目录下的eeprom.bin文件下载到本地，做好备份。\nBreed的刷入与配置 刷入Breed 在MobaXterm的telnet终端窗口键入命令，不出现错误提示信息就是成功了。\nmtd write /tmp/breed.bin Bootloader 进入Breed 以下步骤务必正确进行。\n拔掉路由器4C电源，用牙签按住路由器4C的reset按钮不松开，插上电源，路由器4C的灯会闪几下，这需要几秒钟，然后松开reset，路由器已进入Breed。\n用网线连接电脑和路由器4C的Lan口（局域网网口，而不是接入外部网络的口），在电脑上用浏览器打开192.168.1.1就能看到Breed的网页界面了。\n第一次进入Breed，要在Breed里面把前面备份的eeprom.bin文件刷回去。进Breed-固件更新，里面可以刷eeprom。\n刷入OpenWrt固件 现在正式开始刷入OpenWrt固件，依次点击固件更新-勾选固件-点击选择文件，选择我们刚刚下载的Mi4C.bin，然后耐心等待固件刷入完成。\n安装完成后会自动重启，这时可以不断刷新浏览器，直到管理界面显示出来，如果没有显示，建议稍后使用192.168.1.1访问管理页面。\n账号:root\n密码:默认没有密码或者默认密码为password\nOpenWrt配置 端口校园网配置 选择左侧网络-接口，选择WAN6-编辑。\n协议选择PPPoE，然后点击出现的 Switch Protocol（切换协议）按钮；PAP/CHAP用户名为学号+@unicom，例如23338080@unicom；密码为校园网登陆密码。随后点击保存，然后点击保存并应用。\n另一个端口WAN不要进行相同设置，只设置WAN6即可。因为不能多个“设备”登录同一个校园网账号。\n无线网络设置 选择左侧网络-无线。如果提示Disabled（已禁用）就点击Enable（启用）。可能只有一个2.4G的，也可能有一个2.4G的、一个5G的。点2.4G或5G的编辑按钮。ESSID填你想要的WiFi名称。\n点击Wireless Security（无线安全）。Encryption（加密）改选为WPA2-PSK；Key（密码）填你想要的WiFi密码；最后点击保存并应用。\n配置Dr.com插件 按下图进行配置。\n点击左侧网络-接口，查看WAN6的MAC地址并复制，修改此处Dr.com的MAC拨号的地址。\n注意，在接口名称中，不一定选择的是eth0.2，而是选择与WAN6对应的接口名称，有可能是eth1，下图提示有误。\n在配置保存后，路由器会自动连接。耐心等待后，若可以在页面中看到接发数据，获取到了IP地址，即配置成功。\n如果发现路由器一直不能上网，则说明:\nwan中，学号密码输入错误(可能性30%)； drcom插件中，学号密码输入错误(可能性30%)； 路由器的wan没有与校园网端口连接(可能性20%)； 网线断了，或者路由器坏了(可能性15%)； 压根没开通校园网(可能性4.9%)； 端口被学校网络中心拉黑了(极少出现0.1%)。 （可选操作）配置防检测 具体看这里：shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt (github.com)\n大功告成 🎉至此已经可以上网了！开始享受无线设备数量限制的快乐吧！\n本教程大体还是参照Github项目Drcom-GDUT-HC5661A-OpenWrt进行配置。其他路由器可参照该项目。\n","wordCount":"2554","inLanguage":"zh","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-03-11T23:16:39+08:00","dateModified":"2024-03-11T23:16:39+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/docs/mi4c-drcom/"},"publisher":{"@type":"Organization","name":"Daaihang's Blog","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Daaihang's Blog (Alt + H)"><img src=http://localhost:1313/favicon.svg alt aria-label=logo height=35>Daaihang's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/daily/ title=🎈日常><span>🎈日常</span></a></li><li><a href=http://localhost:1313/docs/ title=🧑‍💻开发><span>🧑‍💻开发</span></a></li><li><a href=http://localhost:1313/tags/ title=🏷️标签><span>🏷️标签</span></a></li><li><a href=http://localhost:1313/categories/ title=📌分类><span>📌分类</span></a></li><li><a href=http://localhost:1313/search/ title=🔍搜索><span>🔍搜索</span></a></li><li><a href=http://localhost:1313/friend/ title=🧑‍🤝‍🧑朋友><span>🧑‍🤝‍🧑朋友</span></a></li><li><a href=http://localhost:1313/about/ title=🫰关于><span>🫰关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>主页</a>&nbsp;»&nbsp;<a href=http://localhost:1313/docs/>开发</a></div><h1 class=post-title>使用小米路由器 4C 登录西邮联通校园网</h1><div class=post-meta>2024-03-11·2554 字&nbsp;|&nbsp;<a href=https://github.com/daaihang/myWebsite/tree/main/content/docs/mi4c-drcom.md rel="noopener noreferrer" target=_blank>源代码</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e6%ad%a5%e9%aa%a4%e6%8f%90%e8%a6%81 aria-label=步骤提要>步骤提要</a></li><li><a href=#%e6%96%87%e4%bb%b6%e4%b8%8b%e8%bd%bd aria-label=文件下载>文件下载</a></li><li><a href=#%e5%89%8d%e7%bd%ae%e6%ad%a5%e9%aa%a4%e8%bf%9b%e5%85%a5%e7%b3%bb%e7%bb%9f%e9%85%8d%e7%bd%ae%e5%af%86%e7%a0%81 aria-label=前置步骤：进入系统配置密码>前置步骤：进入系统配置密码</a></li><li><a href=#%e5%9c%a8%e5%b0%8f%e7%b1%b3%e8%b7%af%e7%94%b1%e5%99%a84c%e4%b8%8a%e5%bc%80%e5%90%aftelnet%e5%92%8cftp aria-label=在小米路由器4C上开启telnet和FTP>在小米路由器4C上开启telnet和FTP</a></li><li><a href=#%e7%94%a8telnet%e7%99%bb%e5%bd%95%e5%88%b0%e5%b0%8f%e7%b1%b3%e8%b7%af%e7%94%b1%e5%99%a84c aria-label=用telnet登录到小米路由器4C>用telnet登录到小米路由器4C</a><ul><li><a href=#%e7%94%9f%e6%88%90eeprom%e5%a4%87%e4%bb%bd%e6%96%87%e4%bb%b6 aria-label=生成eeprom备份文件>生成eeprom备份文件</a></li></ul></li><li><a href=#%e4%bd%bf%e7%94%a8ftp%e4%b8%8a%e4%bc%a0breed%e5%b9%b6%e4%b8%8b%e8%bd%bdeeprom%e5%a4%87%e4%bb%bd%e6%96%87%e4%bb%b6 aria-label=使用FTP上传Breed，并下载eeprom备份文件>使用FTP上传Breed，并下载eeprom备份文件</a></li><li><a href=#breed%e7%9a%84%e5%88%b7%e5%85%a5%e4%b8%8e%e9%85%8d%e7%bd%ae aria-label=Breed的刷入与配置>Breed的刷入与配置</a><ul><li><a href=#%e5%88%b7%e5%85%a5breed aria-label=刷入Breed>刷入Breed</a></li><li><a href=#%e8%bf%9b%e5%85%a5breed aria-label=进入Breed>进入Breed</a></li></ul></li><li><a href=#%e5%88%b7%e5%85%a5openwrt%e5%9b%ba%e4%bb%b6 aria-label=刷入OpenWrt固件>刷入OpenWrt固件</a></li><li><a href=#openwrt%e9%85%8d%e7%bd%ae aria-label=OpenWrt配置>OpenWrt配置</a><ul><li><a href=#%e7%ab%af%e5%8f%a3%e6%a0%a1%e5%9b%ad%e7%bd%91%e9%85%8d%e7%bd%ae aria-label=端口校园网配置>端口校园网配置</a></li><li><a href=#%e6%97%a0%e7%ba%bf%e7%bd%91%e7%bb%9c%e8%ae%be%e7%bd%ae aria-label=无线网络设置>无线网络设置</a></li><li><a href=#%e9%85%8d%e7%bd%aedrcom%e6%8f%92%e4%bb%b6 aria-label=配置Dr.com插件>配置Dr.com插件</a></li><li><a href=#%e5%8f%af%e9%80%89%e6%93%8d%e4%bd%9c%e9%85%8d%e7%bd%ae%e9%98%b2%e6%a3%80%e6%b5%8b aria-label=（可选操作）配置防检测>（可选操作）配置防检测</a></li></ul></li><li><a href=#%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90 aria-label=大功告成>大功告成</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>使用广东工业大学的OpenWrt刷机包。亲测可以直接在西安邮电大学长安校区使用（联通校园网），并解除联通校园网的设备使用数量限制。适合有多台设备的同学使用。</p><p>参考文章：</p><ul><li><p>⭐<a href=https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt>在Dr.COM下使用路由器上校园网WIFI</a>（若配置别的路由器则可以看这个Github项目）</p></li><li><p><a href=https://www.right.com.cn/forum/thread-4040540-1-1.html>开启telnet刷小米路由器</a></p></li></ul><p>本教程仅供学习，请在成功刷入OpenWrt后正确使用系统，并在学习后24小时内删除相关固件和（或）软件包。</p><h2 id=步骤提要>步骤提要<a hidden class=anchor aria-hidden=true href=#步骤提要>#</a></h2><ol><li><p>初始化，简单进入系统。</p></li><li><p>开启telnet和ftp，刷Breed，防止变砖。</p></li><li><p>刷OpenWrt，配置网络和Dr.com。</p></li></ol><h2 id=文件下载>文件下载<a hidden class=anchor aria-hidden=true href=#文件下载>#</a></h2><ul><li><strong>MobaXterm</strong> <a href=https://mobaxterm.mobatek.net/download-home-edition.html>官网（MobaXterm Xserver）</a>，建议下载便携版本（Portable edition）。</li><li><strong>R3GV2 patches</strong> <a href="https://cntk-my.sharepoint.com/:u:/g/personal/599100706_mail_scun_net/EbfqzlpS8U9BhnNBz50mVLQBI98-6XU3NPFG0XlP7vJ63g?e=OZSheQ">Onedrive链接</a>。</li><li><strong>Breed</strong>（小米4C）<a href=https://breed.hackpascal.net/breed-mt7688-reset38.bin>下载链接</a>，其他路由器查看<a href=https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt#%E4%B8%8B%E8%BD%BDbreed>这里</a>的表格。</li><li><strong>OpenWrt</strong>（小米4C）Github<a href=https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt/files/8138729/Mi4C.zip>下载链接</a>（内置了Dr.com插件及防检测插件）。</li><li>（可选）自行安装OpenWrt其他软件包。</li></ul><h2 id=前置步骤进入系统配置密码>前置步骤：进入系统配置密码<a hidden class=anchor aria-hidden=true href=#前置步骤进入系统配置密码>#</a></h2><p>在校内无网情况下，路由器需要先配置WIFI密码才能进行后续步骤。否则无法用命令行登录小米路由器。</p><p>路由器插入电源，手机或电脑搜索WIFI，找到名为<code>Xiaomi_****</code>的无密码WIFI，直接连接。</p><p>打开路由器默认配置界面（IP地址：<a href=http://192.168.31.1>192.168.31.1</a>），跳过拨号配置界面，直接设置WIFI密码（管理员密码默认于此相同，刷入Breed后该密码会被覆盖）。随后进入路由器主页，即可关闭网页。</p><h2 id=在小米路由器4c上开启telnet和ftp>在小米路由器4C上开启telnet和FTP<a hidden class=anchor aria-hidden=true href=#在小米路由器4c上开启telnet和ftp>#</a></h2><p>解压R3GV2 patches包，双击运行<code>0.start_main.bat</code>批处理文件，期间需要在cmd窗口输入你的路由器4C的管理员密码。结束后，路由器4C就可以用telnet远程登录和使用FTP上传下载文件了。</p><blockquote><p>原理大概是运用程序漏洞提权，获取root权限并开启FTP服务。</p></blockquote><h2 id=用telnet登录到小米路由器4c>用telnet登录到小米路由器4C<a hidden class=anchor aria-hidden=true href=#用telnet登录到小米路由器4c>#</a></h2><p>在MobaXterm里新建一个session，类型telnet，主机地址为<code>192.168.31.1</code>，用户为<code>root</code>，密码空，就能登录路由器4C了。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211455225.png></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211458021.png></p><p><img alt=命令行出现root@XiaoQiang即可，图中未显示。 loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211459646.png></p><p>看到命令提示符是<code>root@XiaoQiang</code>即可完成登录。这其实就是Linux下的Shell。</p><h3 id=生成eeprom备份文件>生成eeprom备份文件<a hidden class=anchor aria-hidden=true href=#生成eeprom备份文件>#</a></h3><p>在MobaXterm的telnet终端窗口键入以下命令并回车。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/mtd3 <span class=nv>of</span><span class=o>=</span>/tmp/eeprom.bin
</span></span></code></pre></div><p>理论上讲，用dd命令可以备份路由器4C的所有分区。<strong>最好把所有分区都备份。</strong></p><h2 id=使用ftp上传breed并下载eeprom备份文件>使用FTP上传Breed，并下载eeprom备份文件<a hidden class=anchor aria-hidden=true href=#使用ftp上传breed并下载eeprom备份文件>#</a></h2><p>在Windows上打开资源管理器，在地址栏输入<a href=ftp://192.168.31.1>ftp://192.168.31.1</a>然后回车，路由器4C的文件系统就出现了。</p><blockquote><p>FTP服务使用的是游客匿名登录，无需账户和密码，可以直接回车登录。不要使用<code>root</code>账户登录。</p></blockquote><p>把之前下载的<code>breed-mt7688-reset38.bin</code>改名为<code>breed.bin</code>，然后复制到<code>/tmp</code>目录内备用。</p><p>另外把<code>/tmp</code>目录下的<code>eeprom.bin</code>文件下载到本地，做好备份。</p><h2 id=breed的刷入与配置>Breed的刷入与配置<a hidden class=anchor aria-hidden=true href=#breed的刷入与配置>#</a></h2><h3 id=刷入breed>刷入Breed<a hidden class=anchor aria-hidden=true href=#刷入breed>#</a></h3><p>在MobaXterm的telnet终端窗口键入命令，不出现错误提示信息就是成功了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mtd write /tmp/breed.bin Bootloader
</span></span></code></pre></div><h3 id=进入breed>进入Breed<a hidden class=anchor aria-hidden=true href=#进入breed>#</a></h3><p><strong>以下步骤务必正确进行。</strong></p><p>拔掉路由器4C电源，用牙签按住路由器4C的<code>reset按钮</code>不松开，插上电源，路由器4C的灯会闪几下，这需要几秒钟，然后松开reset，路由器已进入Breed。</p><p>用网线连接电脑和路由器4C的Lan口（局域网网口，而不是接入外部网络的口），在电脑上用浏览器打开<a href=http://192.168.1.1>192.168.1.1</a>就能看到Breed的网页界面了。</p><p>第一次进入Breed，要在Breed里面把前面备份的<code>eeprom.bin</code>文件刷回去。进Breed-固件更新，里面可以刷eeprom。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211537572.png></p><h2 id=刷入openwrt固件>刷入OpenWrt固件<a hidden class=anchor aria-hidden=true href=#刷入openwrt固件>#</a></h2><p>现在正式开始刷入OpenWrt固件，依次点击固件更新-勾选固件-点击选择文件，选择我们刚刚下载的<code>Mi4C.bin</code>，然后耐心等待固件刷入完成。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211539496.png></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211540055.png></p><p>安装完成后会自动重启，这时可以不断刷新浏览器，直到管理界面显示出来，如果没有显示，建议稍后使用192.168.1.1访问管理页面。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211544294.png></p><blockquote><p>账号:<code>root</code></p><p>密码:默认没有密码或者默认密码为<code>password</code></p></blockquote><h2 id=openwrt配置>OpenWrt配置<a hidden class=anchor aria-hidden=true href=#openwrt配置>#</a></h2><h3 id=端口校园网配置>端口校园网配置<a hidden class=anchor aria-hidden=true href=#端口校园网配置>#</a></h3><p>选择左侧<strong>网络-接口</strong>，选择WAN6-编辑。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211620750.png></p><p>协议选择<code>PPPoE</code>，然后点击出现的 Switch Protocol（切换协议）按钮；PAP/CHAP用户名为学号+<code>@unicom</code>，例如<code>23338080@unicom</code>；密码为校园网登陆密码。随后点击<code>保存</code>，然后点击<code>保存并应用</code>。</p><p><img alt=image-20230221162500261 loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211625399.png></p><p>另一个端口<code>WAN</code><strong>不要</strong>进行相同设置，只设置<code>WAN6</code>即可。因为不能多个“设备”登录同一个校园网账号。</p><h3 id=无线网络设置>无线网络设置<a hidden class=anchor aria-hidden=true href=#无线网络设置>#</a></h3><p>选择左侧<strong>网络-无线</strong>。如果提示Disabled（已禁用）就点击Enable（启用）。可能只有一个2.4G的，也可能有一个2.4G的、一个5G的。点2.4G或5G的编辑按钮。ESSID填你想要的WiFi名称。</p><p>点击Wireless Security（无线安全）。Encryption（加密）改选为<code>WPA2-PSK</code>；Key（密码）填你想要的WiFi密码；最后点击<code>保存并应用</code>。</p><h3 id=配置drcom插件>配置Dr.com插件<a hidden class=anchor aria-hidden=true href=#配置drcom插件>#</a></h3><p>按下图进行配置。</p><p>点击左侧<strong>网络-接口</strong>，查看<code>WAN6</code>的<code>MAC</code>地址并复制，修改此处Dr.com的<code>MAC拨号</code>的地址。</p><p>注意，在接口名称中，不一定选择的是<code>eth0.2</code>，而是选择与<code>WAN6</code>对应的接口名称，有可能是<code>eth1</code>，下图提示有误。</p><p><img alt=image-20230221170502631 loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211706729.png></p><p>在配置保存后，路由器会自动连接。耐心等待后，若可以在页面中看到接发数据，获取到了IP地址，即配置成功。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211642791.png></p><blockquote><p><strong>如果发现路由器一直不能上网，则说明:</strong></p><ul><li>wan中，学号密码输入错误(可能性30%)；</li><li>drcom插件中，学号密码输入错误(可能性30%)；</li><li>路由器的wan没有与校园网端口连接(可能性20%)；</li><li>网线断了，或者路由器坏了(可能性15%)；</li><li>压根没开通校园网(可能性4.9%)；</li><li>端口被学校网络中心拉黑了(极少出现0.1%)。</li></ul></blockquote><h3 id=可选操作配置防检测>（可选操作）配置防检测<a hidden class=anchor aria-hidden=true href=#可选操作配置防检测>#</a></h3><p>具体看这里：<a href=https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt#%E6%AD%A5%E9%AA%A4%E5%85%AD%E9%85%8D%E7%BD%AE%E9%98%B2%E6%A3%80%E6%B5%8B>shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt (github.com)</a></p><h2 id=大功告成>大功告成<a hidden class=anchor aria-hidden=true href=#大功告成>#</a></h2><p>🎉至此已经可以上网了！开始享受无线设备数量限制的快乐吧！</p><p>本教程大体还是参照Github项目<a href=https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt>Drcom-GDUT-HC5661A-OpenWrt</a>进行配置。其他路由器可参照该项目。</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=http://localhost:1313/docs/ubuntu-mongodb/><span class=title>« 上一页</span><br><span>Ubuntu 20.04 安装 MongoDB 7.0</span>
</a><a class=next href=http://localhost:1313/docs/gzctf-build/><span class=title>下一页 »</span><br><span>GZCTF 搭建部署笔记（Docker）</span></a></nav></footer></article></main><footer class=footer><span>© <a href=https://wdh.hk>Daaihang Wong</a> <a href="https://icp.gov.moe/?keyword=20252019">萌ICP备20252019号</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/sherlcok314159/MyPaperMod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(e)}),i.parentNode.insertBefore(n,i)})("/js/pangu.min.js",function(){pangu.spacingPage()})</script><script>(function(){var e,t,n,s=document.getElementsByTagName("code");for(n=0;n<s.length;){if(t=s[n],t.parentNode.tagName!=="PRE"&&t.childElementCount===0&&(e=t.textContent,/^\$[^$]/.test(e)&&/[^$]\$$/.test(e)&&(e=e.replace(/^\$/,"\\(").replace(/\$$/,"\\)"),t.textContent=e),/^\\\((.|\s)+\\\)$/.test(e)||/^\\\[(.|\s)+\\\]$/.test(e)||/^\$(.|\s)+\$$/.test(e)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(e))){t.outerHTML=t.innerHTML;continue}n++}})()</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function s(){t.innerHTML="Done",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>